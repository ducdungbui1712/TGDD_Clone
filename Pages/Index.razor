@page "/"
@inject HttpClient HttpClient
@inject NavigationManager NavigationManager

<PageTitle>HomePage</PageTitle>

<FluentGrid>
     @foreach (var phone in Phones) {
        @if(phone.Discount !=1){
        <FluentGridItem xs="6" sm="3">
            @{ var resultPrice = @phone.BasePrice -(@phone.BasePrice * @phone.Discount);}
            <FluentCard class="m-3 text-center">
                            <div class="badge bg-dark text-white position-absolute w-2" style="top: 0.5rem; right: 0.5rem">Sale</div>
                            <img class="card-img-top w-70 img-fluid" src="@phone.ImageUrl" alt="..." />
                            <p class="m-2">@phone.Model</p>
                            <strong class="m-2 price">
                                <span class="text-muted text-decoration-line-through">@phone.BasePrice.ToString("C")</span> @resultPrice.ToString("C")
                            </strong>
                            <FluentButton IconStart="@(new Icons.Regular.Size24.Cart())" class="d-block">
                                                Mua Ngay
                            </FluentButton>
            </FluentCard>
        </FluentGridItem>
        }
        else{
            <FluentGridItem xs="6" sm="3">
            @{ var resultPrice = @phone.BasePrice -(@phone.BasePrice * @phone.Discount);}
           <FluentCard class="m-3 text-center">
                            <img class="card-img-top w-70 img-fluid" src="@phone.ImageUrl" alt="..." />
                            <p class="m-2">@phone.Model</p>
                            <strong class="m-2 price">@phone.BasePrice.ToString("C")</strong>
                            <FluentButton IconStart="@(new Icons.Regular.Size24.Cart())">
                                                Mua Ngay
                            </FluentButton>
            </FluentCard>

        </FluentGridItem>
        }
}

</FluentGrid>

<Hotsale/>


@code{
    List<Phone> Phones = new List<Phone>();
    protected override async Task OnInitializedAsync()
    {
    Phones = await HttpClient.GetFromJsonAsync<List<Phone>>(NavigationManager.BaseUri + "phones");
    }

}
